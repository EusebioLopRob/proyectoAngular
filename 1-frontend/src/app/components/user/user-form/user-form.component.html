<form class="d-flex" #f="ngForm" (ngSubmit)="onSubmit(f)">
    <div class="col">
        <div class="mb-3">
            <label for="username" class="form-label">{{mode=='add'? 'Nuevo usuario':'Nombre de usuario'}}</label>
            <input type="text" name="username" id="username" *ngIf="mode!='edit'"
                ngClass="{{mode=='login'? 'form-control w-75':'form-control'}}" [(ngModel)]="user.username"
                placeholder="Introduzca un nombre de usuario..." required>
            <input type="text" name="username" id="username" *ngIf="sentUser"
                ngClass="{{mode=='login'? 'form-control w-75':'form-control'}}" [(ngModel)]="sentUser.username"
                placeholder="Introduzca un nombre de usuario..." required>
            <small class="text-danger">{{usernameError}}</small>
        </div>
        <div class="mb-3">
            <label for="pass" class="form-label">Contrase単a</label>
            <input type="text" name="pass" id="pass" ngClass="{{mode=='login'? 'form-control w-75':'form-control'}}" *ngIf="mode!='edit'"
                [(ngModel)]="user.password" placeholder="Introduzca una contrase単a..." 
                required pattern=".{4,}" title="Introduzca al menos 4 caracteres">
            <input type="text" name="pass" id="pass" ngClass="{{mode=='login'? 'form-control w-75':'form-control'}}" *ngIf="sentUser"
                [(ngModel)]="sentUser.password" placeholder="Introduzca una contrase単a..." 
                required pattern=".{4,}" title="Introduzca al menos 4 caracteres">
            <small class="text-danger">{{passwordError}}</small>
        </div>

        <div class="mb-5" *ngIf="mode=='add'">
            <label for="role" class="form-label">Rol</label>
            <select class="form-control" name="role" id="role" [(ngModel)]="user.admin">
                <option [value]="false">Usuario normal</option>
                <option [value]="true">Administrador</option>
            </select>
        </div>
        <div class="mb-5" *ngIf="sentUser">
            <label for="role" class="form-label">Rol</label>
            <select class="form-control" name="role" id="role" [(ngModel)]="sentUser.admin">
                <option [value]="false">Usuario normal</option>
                <option [value]="true">Administrador</option>
            </select>
        </div>

        <div *ngIf="mode!='login'; then thenBlock else elseBlock"></div>
        <ng-template #thenBlock>
            <div class="mb-3 row">
                <div class="col-3">
                    <button type="submit" ngClass="{{mode=='add'? 'btn btn-success w-100':'btn btn-primary w-100'}}">
                        {{mode=='add'? 'A単adir':'Actualizar'}}
                    </button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-danger w-100" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </ng-template>
        <ng-template #elseBlock>
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-success w-25">Login</button>
            </div>
        </ng-template>
        <small class="text-danger">{{backendReject}}</small>
    </div>
</form>